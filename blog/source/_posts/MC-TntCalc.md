---
title: <<Minecraft>> -珍珠砲/向量砲 TNT當量換算公式-
date: 2025-08-24 22-59-59
categories: 教學筆記
cover: https://bing.com/th/id/OIP.q2R2SWrlrvd6x5YqLTUkZwHaEK?o=7&cb=thvnextc2rm=3&rs=1&pid=ImgDetMain&o=7&rm=3
tags: [Minecraft,生電,紅石電路,教學,公式]
---

###### (空阻a=0.99，重力g=0.03，時間單位為tick)
## 符號與常數
- 時間：以tick為單位，`t∈ℕ⁺ (t=1,2,3,…)`
- 空氣阻力：`a=0.99`
- 重力：`g=0.03` (每tick速度y向下減少`0.03`)
- 起點座標：`P₀=(x₀,y₀,z₀)`
- 目標座標：`Pₜ=(xₜ,yₜ,zₜ)`
- 座標差：`Δx=xₜ−x₀`，`Δy=yₜ−y₀`，`Δz=zₜ−z₀`，水平距離`R=√(Δx²+Δz²)`
- 起飛初速向量：`V₀=(v₀ₓ,v₀ᵧ,v₀𝓏)`，其大小`V₀=‖V₀‖`
- 水平夾角(方位角)：`φ=atan2(Δz,Δx)`，水平方向單位向量 `ûₕ=(cosφ,0,sinφ)`
- 幾何級數輔助項：`S(t)=∑{i=0}^{t−1} a^i=(1−a^t)/(1−a)`
- 垂直重力補償項：`T(t)=∑{i=0}^{t−1} a^i·i = [a − t·a^t + (t−1)·a^{t+1}]/(1−a)²`

## 離散運動模型
速度與位置的逐tick更新：
- `v_{i+1}=a·v_i + (0,−g,0)`
- `p_{i+1}=p_i + v_{i+1}`
由上式閉式化可得經t個tick後的位置：
- 水平：`pₕ(t)=p₀ₕ + v₀ₕ·S(t)`，其中`v₀ₕ=√(v₀ₓ²+v₀𝓏²)`
- 垂直：`y(t)=y₀ + v₀ᵧ·S(t) − g·T(t)`

## 已知目標座標`(Δx,Δy,Δz)`反解起飛初速
`S(t)/n3)` 初速向量(按方位角分解)
`V₀ = ( v₀ₕ·cosφ , v₀ᵧ , v₀ₕ·sinφ )/n4)` 初速大小
`V₀_mag = √( v₀ₕ² + v₀ᵧ² )`
> 實務：掃描t的合理區間(如`120`~`400`tick)，逐一代入上式求`V₀_mag(t)`，得到一組候選解，之後換算所需TNT數並取可行且最省的方案

## 初速↔TNT數量的實測換算
由於爆風耦合與幾何取決於砲設計，`V₀`與同tick有效TNT數`N`近似線性：
- `V₀_mag ≈ k·N + b/n`其中`k`, `b`需對「固定幾何與同步節奏」的砲體進行一次校正：
- 以不同`N`(如`N∈{N₁,N₂,…}`)在同高度平地試射，記錄命中座標，帶入`§2`反解`V₀_mag`；
- 用點集`{(N_i, V₀_i)}`做線性回歸得`k`,`b`；
- 之後即可用`N = (V₀_mag − b)/k`估算需求，同時將`N`四捨五入到你能穩定「同tick同步引爆」的整數

### 單次同步 vs 分段(階梯)推進
- 單次同步：一個tick內引爆`N`顆→以`N`帶入上式
- 分段推進(失量/矢量)：把整旅程切成`m`段，每段`j`視為一次新起點，對該段目標`Δ⃗_j`各自選`t_j`並反解`V₀_j`、`N_j`；段與段之間把上一段末位置當下一段起點

## 從座標直接計算所需TNT的步驟(單段示例)
輸入：`x₀,y₀,z₀`；`xₜ,yₜ,zₜ`；掃描範圍`t∈[t_min,t_max]`；校正係數`k`,`b`
步驟：
1) 計`Δx,Δy,Δz`與`R=√(Δx²+Δz²)`、`φ=atan2(Δz,Δx)`
2) 迭代`t=t_min…t_max`：
 a. 算`S=(1−a^t)/(1−a)`；`T=[a − t·a^t + (t−1)·a^{t+1}]/(1−a)²`
 b. `v₀ₕ=R/S`，`v₀ᵧ=(Δy+g·T)/S`
 c. `V₀_mag=√(v₀ₕ²+v₀ᵧ²)`
 d. 估`N_raw=(V₀_mag−b)/k`，取`N=round_to_sync(N_raw)`
 e. 記錄`( t , N , V₀_mag , v₀ₕ , v₀ᵧ , φ )`，選擇`N`最小且可實作的解；如需彈道高度限制可再以`§5`驗證
輸出：所需`t`、`N`，以及發射朝向`φ`與元速度`(v₀ₕ,v₀ᵧ)`

## 反驗證(可選)
給定求得的`V₀`，代回離散模型驗證命中：
- `x(t)=x₀ + v₀ₕ·cosφ·S(t)`
- `z(t)=z₀ + v₀ₕ·sinφ·S(t)`
- `y(t)=y₀ + v₀ᵧ·S(t) − g·T(t)`
若`( x(t),y(t),z(t) )≈(xₜ,yₜ,zₜ)`在容差內(如`±0.5`格)，則方案有效；否則調整`t`或改變同步節奏重新估算

## 常見優化與注意
- `t`選擇：同高`(Δy≈0)`時，嘗試使`v₀ᵧ`接近`0`的`t`，常可降低所需`N`
- 線性穩定性：保持爆心距珍珠距離、遮蔽、流體狀態一致；水面高度或方塊遮檔會改變`k`,`b`
- 同步粒度：若你的紅石節奏一次只能穩定同步`M`顆，則N需取`N=ceil(N_raw/M)·M`
- 角度輸出：垂直仰角`θ=atan2(v₀ᵧ, v₀ₕ)`，水平角`φ=atan2(Δz,Δx)`，方便對準瞄準器或指令定位

## 多段失量珍珠砲(分段規劃)
對於`m`段推進，令第`j`段起點`P_{j−1}`、終點`P_j`(可用中間導航座標)，每段選擇`t_j`並用`§2`公式求`V₀_j`，換算`N_j`；遞推：
- `Δ⃗_j = P_j − P_{j−1}/n- v₀ₕ^{(j)} = ‖Δ⃗_{j,水平}‖ / S(t_j)`，`v₀ᵧ^{(j)} = [Δy_j + g·T(t_j)]/S(t_j)`
- `N_j = ( √( (v₀ₕ^{(j)})² + (v₀ᵧ^{(j)})² ) − b ) / k → round_to_sync`
最後彙總`N_j`與對應角度`(φ_j,θ_j)`作為每段的引爆數與朝向

## 速查公式彙整
- `S(t)=(1−a^t)/(1−a)`
- `T(t)=[a − t·a^t + (t−1)·a^{t+1}]/(1−a)²`
- `v₀ₕ=R/S(t)`，`v₀ᵧ=(Δy+g·T(t))/S(t)`
- `V₀_mag=√(v₀ₕ²+v₀ᵧ²)`
- `φ=atan2(Δz,Δx)`，`θ=atan2(v₀ᵧ,v₀ₕ)`
- `N=(V₀_mag−b)/k → round_to_sync`